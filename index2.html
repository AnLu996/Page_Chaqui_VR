<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Chasqui VR ‚Äî Libro/Ruleta horizontal</title>
  <meta name="description" content="ChasquiVR - Navegaci√≥n tipo libro y ruleta" />
  <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
  <style>
    :root{--bg:#0b1020;--surface:#0b1224;--ring:#334155;--text:#e5e7eb;--muted:#94a3b8;--primary:#22d3ee;--accent:#a78bfa;}
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:radial-gradient(1200px 600px at 20% -10%, #1f2937 0%, #0f172a 50%, #0b1020 100%);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Inter,Roboto,Ubuntu,Arial,sans-serif}
    body{overflow:hidden}

    /* NAV superior minimal */
    .topbar{position:fixed;inset:12px 12px auto 12px;display:flex;align-items:center;gap:10px;z-index:30}
    .brand{display:flex;align-items:center;gap:10px;text-decoration:none;color:var(--text);font-weight:800}
    .brand img{height:28px}
    .spacer{flex:1}
    .nav{display:flex;gap:8px}
    .chip{border:1px solid var(--ring);border-radius:999px;padding:8px 12px;color:var(--muted);text-decoration:none;background:#0b1224aa;backdrop-filter:blur(6px)}
    .chip.active{background:linear-gradient(135deg,var(--primary),var(--accent));color:#0a0a0a;font-weight:800}

    /* CONTENEDOR tipo libro */
    .stage{position:relative;width:100vw;height:100vh;perspective:1600px;overflow:hidden}
    .book{position:absolute;inset:0;transform-style:preserve-3d}
    .page{position:absolute;inset:0;padding:80px 10vw 64px;display:grid;grid-template-columns:1.1fr .9fr;gap:28px;align-items:center;border:1px solid var(--ring);border-radius:22px;background:linear-gradient(180deg,#0b1224 0%,#0b1224ee 50%,#0b1224cc 100%);box-shadow:0 30px 80px #000a;transform-origin:left center;backface-visibility:hidden}
    .page .media{display:grid;place-items:center}
    .page img{max-width:100%;max-height:60vh;object-fit:contain;filter:drop-shadow(0 18px 60px #0008)}
    .h1{font-size:clamp(28px,6vw,56px);margin:0 0 10px 0}
    .h2{font-size:clamp(22px,4vw,36px);margin:0 0 8px 0}
    .muted{color:var(--muted)}
    .btn{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--ring);padding:12px 16px;border-radius:12px;background:#0b1224;color:var(--text);text-decoration:none}
    .btn.primary{background:linear-gradient(135deg,var(--primary),var(--accent));color:#0a0a0a;font-weight:800}

    /* Animaci√≥n de paso */
    .enter{animation:flipIn .65s cubic-bezier(.22,1,.36,1)}
    @keyframes flipIn{from{transform:rotateY(-90deg);opacity:.0}to{transform:rotateY(0);opacity:1}}

    /* CONTROLES izquierda/derecha */
    .arrows{position:fixed;inset:auto 0 24px 0;display:flex;justify-content:center;gap:16px;z-index:25}
    .circle{width:56px;height:56px;border-radius:999px;border:1px solid var(--ring);background:#0b1224cc;backdrop-filter:blur(6px);display:grid;place-items:center;cursor:pointer;user-select:none}
    .circle:active{transform:scale(.98)}

    /* RULETA mini (selector de secciones) */
    .wheelDock{position:fixed;right:16px;bottom:16px;z-index:35;display:grid;gap:6px;justify-items:end}
    canvas{width:140px;height:140px;border-radius:50%;border:1px solid var(--ring);background:#0a0f1f;box-shadow:inset 0 0 50px #0006, 0 10px 30px #0008}
    .pointer{position:absolute;top:-6px;right:16px;width:0;height:0;border-left:12px solid transparent;border-right:12px solid transparent;border-bottom:20px solid var(--primary);filter:drop-shadow(0 4px 10px #000a)}
    .hint{font-size:12px;color:var(--muted);background:#0b1224aa;border:1px dashed var(--ring);padding:6px 8px;border-radius:10px}

    @media (max-width:1000px){
      .page{grid-template-columns:1fr;grid-auto-rows:auto}
      .page img{max-height:36vh}
      .topbar{inset:10px}
      .arrows{bottom:14px}
    }
  </style>
</head>
<body>
  <!-- NAV superior -->
  <div class="topbar">
    <a class="brand" href="#" id="home"><img src="assets/img/navbar-logo.png" alt="logo"/>Chasqui VR</a>
    <div class="spacer"></div>
    <nav class="nav" id="tabs">
      <a class="chip" data-i="0">Inicio</a>
      <a class="chip" data-i="1">¬øQu√© es?</a>
      <a class="chip" data-i="2">Historia</a>
      <a class="chip" data-i="3">Gameplay</a>
      <a class="chip" data-i="4">Proceso</a>
      <a class="chip" data-i="5">Equipo</a>
      <a class="chip" data-i="6">Comprar</a>
    </nav>
  </div>

  <!-- ESCENARIO libro -->
  <div class="stage" aria-live="polite" aria-atomic="true">
    <div class="book" id="book"><!-- p√°ginas se inyectan --></div>
  </div>

  <!-- Flechas -->
  <div class="arrows">
    <button class="circle" id="prev" aria-label="P√°gina anterior">‚üµ</button>
    <button class="circle" id="next" aria-label="P√°gina siguiente">‚ü∂</button>
  </div>

  <!-- Mini-ruleta -->
  <div class="wheelDock">
    <div class="pointer" aria-hidden="true"></div>
    <canvas id="wheel" width="160" height="160" aria-label="Ruleta de secciones"></canvas>
    <div class="hint">Gira o toca la secci√≥n</div>
  </div>

  <script>
    // ==== Datos de secciones (contenido resumido de tus bloques) ====
    const PAGES = [
      {
        title:'Chasqui VR', subtitle:'S√â EL MENSAJERO DEL TAHUANTINSUYO',
        body:`Corre por el Qhapaq √ëan y vive la velocidad de los chasquis en VR.`,
        img:'assets/img/chasqui.png',
        cta:[{text:'Saber m√°s', to:1, primary:true},{text:'Ver historia', to:2}]
      },
      {
        title:'¬øQu√© es Chasqui VR?', subtitle:'Qhapaq √ëan, chasquis y mec√°nicas',
        body:`Recorre el <b>Qhapaq √ëan</b>, entrega <b>quipus</b> y usa movimiento f√≠sico, voz y gestos.`,
        img:'assets/img/fondo.png'
      },
      {
        title:'Historia', subtitle:'De posta a posta',
        body:`Inicio: recibes el quipu. Desarrollo: corres, saltas y soplas el <b>pututo</b>. Final: entregas y eres puntuado.`,
        img:'assets/img/desarrollo.png'
      },
      {
        title:'Gameplay', subtitle:'Lo que har√°s',
        body:`üèÉ‚Äç‚ôÇÔ∏è Correr / saltar / agacharte<br>üñêÔ∏è Gestos para elegir rutas<br>üì£ Voz para turbo temporal`,
        img:'assets/img/obstaculos.png'
      },
      {
        title:'Proceso de desarrollo', subtitle:'Del concepto a las pruebas',
        body:`Idea ‚Üí Prototipo ‚Üí Juego final ‚Üí Test con usuarios. Ajustes de control e inmersi√≥n.`,
        img:'assets/img/juego-final.png'
      },
      {
        title:'Equipo', subtitle:'Nosotras',
        body:`Melany Cahuana ¬∑ Andrea Cuela ¬∑ Merisabel Ruelas ¬∑ Rushell Zavalaga`,
        img:'assets/img/team/1.jpg'
      },
      {
        title:'Comprar', subtitle:'¬øListx para correr?',
        body:`D√©janos tus datos y te contactamos para acceder al juego.`,
        img:'assets/img/inicio.png',
        form:true
      }
    ];

    const book = document.getElementById('book');
    const tabs = [...document.querySelectorAll('#tabs .chip')];
    const prevBtn = document.getElementById('prev');
    const nextBtn = document.getElementById('next');

    let index = 0;

    function render(i){
      index = Math.max(0, Math.min(PAGES.length-1, i));
      book.innerHTML = '';
      const p = PAGES[index];
      const page = document.createElement('section');
      page.className = 'page enter';
      page.innerHTML = `
        <div>
          <h1 class="h1">${p.title}</h1>
          <p class="muted">${p.subtitle||''}</p>
          <p>${p.body||''}</p>
          <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px" id="cta"></div>
          ${p.form?`
          <form id="contactForm" style="display:grid;gap:10px;margin-top:10px">
            <input required placeholder="Tu nombre *"/>
            <input required type="email" placeholder="Tu correo *"/>
            <input required type="tel" placeholder="Tu tel√©fono *"/>
            <textarea required placeholder="Mensaje *"></textarea>
            <button class="btn primary" type="submit">Enviar</button>
            <span class="muted" id="msg"></span>
          </form>`:''}
        </div>
        <div class="media">
          ${p.img?`<img src="${p.img}" alt="${p.title}">`:''}
        </div>`;
      book.appendChild(page);

      // CTAs
      const ctaMount = page.querySelector('#cta');
      if(ctaMount && p.cta){
        p.cta.forEach(c=>{
          const a=document.createElement('a'); a.href='#'; a.className='btn'+(c.primary?' primary':''); a.textContent=c.text; a.onclick=(e)=>{e.preventDefault(); go(c.to)}; ctaMount.appendChild(a);
        })
      }

      // Form
      const form = page.querySelector('#contactForm');
      if(form){
        form.addEventListener('submit', e=>{e.preventDefault(); page.querySelector('#msg').textContent='¬°Gracias! Te contactaremos pronto.'; form.reset();});
      }

      // Nav active
      tabs.forEach((t,k)=>t.classList.toggle('active', k===index));
      drawWheel();
      updateButtons();
    }

    function go(i){ render(i); }
    function next(){ if(index < PAGES.length-1) go(index+1); }
    function prev(){ if(index > 0) go(index-1); }

    function updateButtons(){
      prevBtn.style.opacity = index===0? .4:1;
      nextBtn.style.opacity = index===PAGES.length-1? .4:1;
    }

    prevBtn.addEventListener('click', prev);
    nextBtn.addEventListener('click', next);
    tabs.forEach(t=> t.addEventListener('click', ()=> go(+t.dataset.i)) );

    // Teclado y rueda del mouse ‚Üí paginado horizontal
    document.addEventListener('keydown', (e)=>{
      if(['ArrowRight','PageDown'].includes(e.key)) next();
      if(['ArrowLeft','PageUp'].includes(e.key)) prev();
      if(e.key==='Home') go(0);
      if(e.key==='End') go(PAGES.length-1);
    });
    let wheelLock=false; // evita m√∫ltiples pasos con una rueda fuerte
    window.addEventListener('wheel', (e)=>{
      if(wheelLock) return; wheelLock=true;
      (e.deltaY>0 || e.deltaX>0) ? next() : prev();
      setTimeout(()=>wheelLock=false, 280);
    }, {passive:true});

    // ==== MINI RULETA ==== 
    const wheel = document.getElementById('wheel');
    const ctx = wheel.getContext('2d');
    function drawWheel(){
      const W=wheel.width, H=wheel.height; const R=Math.min(W,H)/2 - 8; const n=PAGES.length; const step=Math.PI*2/n;
      ctx.clearRect(0,0,W,H); ctx.save(); ctx.translate(W/2,H/2); ctx.rotate(-Math.PI/2); // 0¬∞ arriba
      for(let i=0;i<n;i++){
        ctx.beginPath(); ctx.moveTo(0,0); ctx.arc(0,0,R,i*step,(i+1)*step); ctx.closePath();
        const hue = (i*(360/n))%360; ctx.fillStyle = `hsl(${hue} 70% ${i===index?45:30}%)`; ctx.fill();
        ctx.strokeStyle = '#0b1224'; ctx.lineWidth=2; ctx.stroke();
      }
      // etiquetas m√≠nimas
      ctx.rotate(step/2);
      ctx.fillStyle='#e5e7eb'; ctx.font='bold 10px system-ui,sans-serif';
      for(let i=0;i<n;i++){
        ctx.save(); ctx.rotate(i*step); ctx.textAlign='center'; ctx.fillText(String(i+1), R-12, 4); ctx.restore();
      }
      ctx.restore();
    }
    // Interacci√≥n con clic/tap en ruleta
    wheel.addEventListener('click', (e)=>{
      const rect = wheel.getBoundingClientRect();
      const x = e.clientX - rect.left - rect.width/2; const y = e.clientY - rect.top - rect.height/2;
      let ang = Math.atan2(y, x) + Math.PI/2; if(ang<0) ang+=Math.PI*2; // 0¬∞ arriba
      const idx = Math.floor( ang / (Math.PI*2/PAGES.length) );
      go(idx);
    });

    // Inicio
    render(0);
  </script>
</body>
</html>
